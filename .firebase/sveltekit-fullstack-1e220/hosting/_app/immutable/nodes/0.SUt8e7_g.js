import{s as p,c as g,u as b,g as w,a as $,o as S}from"../chunks/scheduler.DHKgWpgq.js";import{S as v,i as D,e as y,c as C,a as R,d as f,b as A,f as M,t as T,g as U}from"../chunks/index.CH_yHiIP.js";import{a as q,d as h,b as m,g as E,s as F,c as I}from"../chunks/store.D9NLukO8.js";function L(i){let a,o;const r=i[1].default,e=g(r,i,i[0],null);return{c(){a=y("div"),e&&e.c(),this.h()},l(t){a=C(t,"DIV",{class:!0});var s=R(a);e&&e.l(s),s.forEach(f),this.h()},h(){A(a,"class","mainContainer svelte-dwa91y")},m(t,s){M(t,a,s),e&&e.m(a,null),o=!0},p(t,[s]){e&&e.p&&(!o||s&1)&&b(e,r,t,t[0],o?$(r,t[0],s,null):w(t[0]),null)},i(t){o||(T(e,t),o=!0)},o(t){U(e,t),o=!1},d(t){t&&f(a),e&&e.d(t)}}}function P(i,a,o){let{$$slots:r={},$$scope:e}=a;const t=["/","product"];return S(()=>(console.log("Mounting"),q.onAuthStateChanged(async n=>{const u=window.location.pathname;if(!n&&!t.includes(u)){window.location.href="/";return}if(n&&u==="/"){window.location.href="/dashboard";return}if(!n)return;let l;const _=h(m,"users",n.uid),d=await E(_);if(d.exists())console.log("Fetching User"),l=d.data();else{console.log("Creating User");const c=h(m,"users",n.uid);l={email:n.email,todos:[]},await F(c,l,{merge:!0})}I.update(c=>({...c,user:n,data:l,loading:!1}))}))),i.$$set=s=>{"$$scope"in s&&o(0,e=s.$$scope)},[e,r]}class z extends v{constructor(a){super(),D(this,a,P,L,p,{})}}export{z as component};
